<!--Single Spending Account Payment View-->
<div ng-form="OCPaymentSpendingAccount" cg-busy="updatingSpendingAccountPayment">
	<div class="panel panel-default" ng-repeat="spendingAccount in spendingAccounts">
		<div class="panel-body" ng-if="payment.SpendingAccountID == spendingAccount.ID || (showPaymentOptions && (!excludedSpendingAccounts || excludedSpendingAccounts.indexOf(spendingAccount.ID) == -1))">
			<div class="row">
				<div class="col-xs-6">
					<b>{{spendingAccount.Name}}</b>
					<div class="text-muted">
						<small ng-if="spendingAccount.StartDate && spendingAccount.EndDate">
							Lifetime: {{spendingAccount.StartDate | date:'shortDate'}} - {{spendingAccount.EndDate | date :'shortDate'}}
						</small>
						<small ng-if="spendingAccount.StartDate && !spendingAccount.EndDate">
							Made Available On: {{spendingAccount.StartDate | date:'shortDate'}}
						</small>
						<small ng-if="!spendingAccount.StartDate && spendingAccount.EndDate">
							Expires On: {{spendingAccount.EndDate | date :'shortDate'}}
						</small>
					</div>
				</div>
				<div class="col-xs-4 text-right">
					<!--TODO: remove the inline style here-->
					<p style="margin:0;" class="lead text-primary" ng-if="spendingAccount.Balance">{{spendingAccount.Balance | currency}}</p>
				</div>
				<div class="col-xs-2 text-right">
					<a href="" ng-click="changePayment()" ng-if="!showPaymentOptions">Change</a>
					<a href="" ng-click="updatePayment(this)" ng-if="showPaymentOptions">Select</a>
				</div>
			</div>
		</div>
		
		<div class="panel-body" ng-if="(excludedSpendingAccounts.indexOf(spendingAccount.ID) !== -1) && (payment.SpendingAccountID !== spendingAccount.ID)">
			<div class="row">
				<b>Spending Account is Already Being Used</b>
			</div>
		</div>

	</div>

	</div>
</div>
